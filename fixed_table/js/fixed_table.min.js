"use strict";var e=eval,global=e("this"),FixedTables;!function(t){var e=function(){function e(i){return e._instance?e._instance:(this.model=new t.FixedTableModel(i),this.view=new t.FixedTableView(this.model),e._instance=this,void 0)}return e.prototype.chengeMode=function(t){this.model.chengeMode(t),this.view.resizeContainer()},e._instance=null,e}();t.FixedTable=e}(FixedTables||(FixedTables={})),"undefined"!=typeof module&&("undefined"==typeof module.exports.FixedTable&&(module.exports.FixedTable={}),module.exports.FixedTable=FixedTables.FixedTable),"undefined"!=typeof global&&("undefined"==typeof global.FixedTable&&(global.FixedTable={}),global.FixedTable=FixedTables.FixedTable);var FixedTables;!function(t){var e=0,i=function(){function t(t,e,i,o,d,h,r,s,l,n,a,p,b,u,f,g,y){this.id=t,this.parent=e,this.tagName=i,this.x=o,this.y=d,this.width=h,this.height=r,this.outerWidth=s,this.outerHeight=l,this.paddingTop=n,this.paddingRight=a,this.paddingBottom=p,this.paddingLeft=b,this.borderTopWidth=u,this.borderRightWidth=f,this.borderBottomWidth=g,this.borderLeftWidth=y,this.id=this.createId(),this.width=this.getWidth(),this.height=this.getHeight()}return t.fromData=function(e){return new t(e.id?e.id:0,e.parent?e.parent:"",e.tagName?e.tagName:"",e.x?e.x:0,e.y?e.y:0,e.width?e.width:0,e.height?e.height:0,e.outerWidth?e.outerWidth:0,e.outerHeight?e.outerHeight:0,e.paddingTop?e.paddingTop:"",e.paddingRight?e.paddingRight:"",e.paddingBottom?e.paddingBottom:"",e.paddingLeft?e.paddingLeft:"",e.borderTopWidth?e.borderTopWidth:"",e.borderRightWidth?e.borderRightWidth:"",e.borderBottomWidth?e.borderBottomWidth:"",e.borderLeftWidth?e.borderLeftWidth:"")},t.prototype.createId=function(){return++e},t.prototype.getWidth=function(){return this.outerWidth-(parseInt(this.paddingRight,10)+parseInt(this.paddingLeft,10)+parseInt(this.borderRightWidth,10)+parseInt(this.borderLeftWidth,10))},t.prototype.getCSSWidth=function(){return this.width+"px"},t.prototype.getHeight=function(){return this.outerHeight-(parseInt(this.paddingTop,10)+parseInt(this.paddingBottom,10)+parseInt(this.borderTopWidth,10)+parseInt(this.borderBottomWidth,10))},t.prototype.getCSSHeight=function(){return this.height+"px"},t}();t.Cell=i}(FixedTables||(FixedTables={}));var FixedTables;!function(t){var e=function(){function e(t,e,i,o,d,h,r,s,l,n,a,p,b,u){this.thead=t,this.tbody=e,this.width=i,this.outerWidth=o,this.paddingTop=d,this.paddingRight=h,this.paddingBottom=r,this.paddingLeft=s,this.borderTopWidth=l,this.borderRightWidth=n,this.borderBottomWidth=a,this.borderLeftWidth=p,this.borderCollapse=b,this.borderSpacing=u}return e.fromData=function(i){return new e(t.Thead.fromData({}),t.Tbody.fromData({}),i.width?i.width:0,i.outerWidth?i.outerWidth:0,i.paddingTop?i.paddingTop:"",i.paddingRight?i.paddingRight:"",i.paddingBottom?i.paddingBottom:"",i.paddingLeft?i.paddingLeft:"",i.borderTopWidth?i.borderTopWidth:"",i.borderRightWidth?i.borderRightWidth:"",i.borderBottomWidth?i.borderBottomWidth:"",i.borderLeftWidth?i.borderLeftWidth:"",i.borderCollapse?i.borderCollapse:this.CSS_BORDER_COLLAPSE_VALUE,i.borderSpacing?i.borderSpacing:this.CSS_BORDER_SPACING_VALUE)},e.prototype.setStyles=function(t){this.width=parseInt(t.width,10),this.paddingTop=t["padding-top"],this.paddingRight=t["padding-right"],this.paddingBottom=t["padding-bottom"],this.paddingLeft=t["padding-left"],this.borderTopWidth=t["border-top-width"],this.borderRightWidth=t["border-right-width"],this.borderBottomWidth=t["border-bottom-width"],this.borderLeftWidth=t["border-left-width"],this.outerWidth=this.getOuterWidth(),this.setTheadStyles()},e.prototype.setTheadStyles=function(){this.thead.setStyles(this)},e.prototype.setTbodyStyles=function(){this.tbody.setStyles(this)},e.prototype.setTbodyFixedModel=function(){this.tbody.setStyles(this)},e.prototype.getOuterWidth=function(){return this.width+(parseInt(this.paddingLeft,10)+parseInt(this.paddingRight,10)+parseInt(this.borderLeftWidth,10)+parseInt(this.borderRightWidth,10))},e.CSS_BORDER_COLLAPSE_VALUE="collapse",e.CSS_BORDER_SPACING_VALUE="0",e}();t.Table=e}(FixedTables||(FixedTables={}));var FixedTables;!function(t){var e=function(){function e(t,e,i,o,d,h,r,s,l){this.elementIdName=t,this.table=e,this.isFullMode=i,this.fixedLineNum=o,this.fixedColumnNum=d,this.offsetTop=h,this.offsetLeft=r,this.position=s,this.overflow=l}return e.fromData=function(i){return new e(i.id?i.id:"fixedTable",t.Table.fromData({}),!!i.fullMode&&i.fullMode,i.fixedLineNum?i.fixedLineNum:1,i.fixedColumnNum?i.fixedColumnNum:1,0,0,this.CSS_POSITION_VALUE,this.CSS_OVERFLOW_VALUE)},e.prototype.getIdName=function(){return this.elementIdName},e.prototype.setOffset=function(t){this.offsetTop=t.top,this.offsetLeft=t.left},e.prototype.getFullModeSize=function(t,e){return{width:t-this.offsetLeft,height:e-this.offsetTop}},e.prototype.chengeMode=function(t){this.isFullMode=t},e.CSS_POSITION_VALUE="relative",e.CSS_OVERFLOW_VALUE="auto",e}();t.TableView=e}(FixedTables||(FixedTables={}));var FixedTables;!function(t){var e=function(){function t(t,e,i,o,d,h,r,s,l,n,a,p){this.cells=t,this.width=e,this.outerWidth=i,this.borderTopWidth=o,this.borderRightWidth=d,this.borderBottomWidth=h,this.borderLeftWidth=r,this.paddingLeft=s,this.marginTop=l,this.display=n,this.fixedPositon=a,this.fixedLeft=p}return t.fromData=function(e){return new t([],e.width?e.width:0,e.outerWidth?e.outerWidth:0,e.borderTopWidth?e.borderTopWidth:"",e.borderRightWidth?e.borderRightWidth:"",e.borderBottomWidth?e.borderBottomWidth:"",e.borderLeftWidth?e.borderLeftWidth:"",0,0,this.CSS_DISPLAY_VALUE,this.FIXED_CSS_POSITION_VALUE,this.FIXED_CSS_LEFT_VALUE)},t.prototype.setCells=function(t){this.cells=t},t.prototype.getCells=function(t,e){return this.cells.filter(function(i){return i.x===t&&i.y===e})},t.prototype.getCell=function(t,e){return this.getCells(t,e)[0]},t.prototype.setStyles=function(t){this.paddingLeft=t.thead.cells[0].outerWidth,this.marginTop=t.thead.cells[0].outerHeight,this.width=t.outerWidth-t.thead.cells[0].outerWidth},t.prototype.getPaddingLeft=function(){return this.paddingLeft},t.prototype.getCSSPaddingLeft=function(){return this.paddingLeft+"px"},t.prototype.getCSSMarginTop=function(){return this.marginTop+"px"},t.prototype.getTbodyWidth=function(){return this.width},t.prototype.getCSSWidth=function(){return this.width+"px"},t.CSS_DISPLAY_VALUE="block",t.FIXED_CSS_POSITION_VALUE="absolute",t.FIXED_CSS_LEFT_VALUE="0",t}();t.Tbody=e}(FixedTables||(FixedTables={}));var FixedTables;!function(t){var e=function(){function t(t,e,i,o,d,h,r,s,l,n,a){this.lineNum=t,this.cells=e,this.width=i,this.outerWidth=o,this.borderTopWidth=d,this.borderRightWidth=h,this.borderBottomWidth=r,this.borderLeftWidth=s,this.position=l,this.top=n,this.zIndex=a}return t.fromData=function(e){return new t(0,[],e.width?e.width:0,e.outerWidth?e.outerWidth:0,e.borderTopWidth?e.borderTopWidth:"",e.borderRightWidth?e.borderRightWidth:"",e.borderBottomWidth?e.borderBottomWidth:"",e.borderLeftWidth?e.borderLeftWidth:"",this.CSS_POSITION_VALUE,this.CSS_TOP_VALUE,this.CSS_ZINDEX_VALUE)},t.prototype.setLineNumber=function(t){this.lineNum=t},t.prototype.setCells=function(t){this.cells=t},t.prototype.getCells=function(t,e){return this.cells.filter(function(i){return i.x===t&&i.y===e})},t.prototype.getCell=function(t,e){return this.getCells(t,e)[0]},t.prototype.getFirstCell=function(){return this.getCell(0,0)},t.prototype.setStyles=function(t){this.borderLeftWidth?this.width=t.outerWidth-(parseInt(this.borderLeftWidth,10)+parseInt(this.borderRightWidth,10)):this.width=t.outerWidth},t.prototype.getWidth=function(){return this.width},t.prototype.getCSSWidth=function(){return this.width+"px"},t.CSS_POSITION_VALUE="absolute",t.CSS_TOP_VALUE="0",t.CSS_ZINDEX_VALUE="10",t}();t.Thead=e}(FixedTables||(FixedTables={}));var FixedTables;!function(t){var e=function(){function e(e){void 0!==e?this.tableView=t.TableView.fromData(e):this.tableView=t.TableView.fromData({})}return e.prototype.getTableViewModel=function(){return this.tableView},e.prototype.getTableModel=function(){return this.tableView.table},e.prototype.getTheadModel=function(){return this.tableView.table.thead},e.prototype.getTbodyModel=function(){return this.tableView.table.tbody},e.prototype.chengeMode=function(t){this.tableView.chengeMode(t)},e}();t.FixedTableModel=e}(FixedTables||(FixedTables={}));var FixedTables;!function(t){var e=function(){function e(t){this.model=t,this.tableViewModel=this.model.getTableViewModel(),this.tableModel=this.model.getTableModel(),this.theadModel=this.model.getTheadModel(),this.tbodyModel=this.model.getTbodyModel(),this.setElements(),this.tableView&&this.init()}return e.prototype.init=function(){this.setTableViewModel(),this.setTableViewStyle(),this.setTableStyle(),this.setTableModel(),this.setTheadStyle(),this.setTheadModel(),this.setTbodyStyle(),this.setTbodyModel(),this.setFixedStyle(),this.setEventHandler()},e.prototype.setElements=function(){this.tableView=document.getElementById(this.tableViewModel.getIdName()),this.tableView&&(this.table=this.tableView.querySelector("table"),this.thead=this.table.querySelector("thead"),this.tbody=this.table.querySelector("tbody"))},e.prototype.setTableViewModel=function(){this.tableViewModel.setOffset(this.tableView.getBoundingClientRect())},e.prototype.setTableViewStyle=function(){this.tableView.style.position=this.tableViewModel.position,this.tableView.style.overflow=this.tableViewModel.overflow,this.tableViewModel.isFullMode&&this.setTableViewFullModeStyle()},e.prototype.setTableViewFullModeStyle=function(){var t=this.tableViewModel.getFullModeSize(document.body.clientWidth,document.body.clientHeight);this.tableView.style.width=t.width+"px",this.tableView.style.height=t.height+"px",t=this.tableViewModel.getFullModeSize(document.body.clientWidth,document.body.clientHeight),this.tableView.style.width=t.width+"px",this.tableView.style.height=t.height+"px"},e.prototype.setTableStyle=function(){this.table.style.borderCollapse=this.tableModel.borderCollapse,this.table.style.borderSpacing=this.tableModel.borderSpacing},e.prototype.setTableModel=function(){var t=this.table.currentStyle||document.defaultView.getComputedStyle(this.table,"");this.tableModel.setStyles(t)},e.prototype.setTheadStyle=function(){this.thead.style.position=this.theadModel.position,this.thead.style.top=this.theadModel.top,this.thead.style.width=this.theadModel.getCSSWidth(),this.thead.style.zIndex=this.theadModel.zIndex},e.prototype.setTheadModel=function(){this.theadModel.setLineNumber(this.table.querySelectorAll("thead tr").length),this.theadModel.setCells(this.createTheadCellsModel())},e.prototype.createTheadCellsModel=function(){for(var t,e=(this.thead.querySelectorAll("tr"),this.thead.querySelectorAll("tr > *")),i=[],o=0;o<e.length;o++)t=e[o].currentStyle||document.defaultView.getComputedStyle(e[o],""),i.push(this.getCreateCellModel("thead",e,t,o,0));return i},e.prototype.setTbodyStyle=function(){this.tableModel.setTbodyFixedModel(),this.tbody.style.display=this.tbodyModel.display,this.tbody.style.width=this.tbodyModel.getCSSWidth(),this.tbody.style.paddingLeft=this.tbodyModel.getCSSPaddingLeft(),this.tbody.style.marginTop=this.tbodyModel.getCSSMarginTop()},e.prototype.setTbodyModel=function(){this.tbodyModel.setCells(this.createTbodyCellsModel())},e.prototype.createTbodyCellsModel=function(){for(var t,e,i=this.tbody.querySelectorAll("tr"),o=[],d=0;d<i.length;d++){t=i[d].querySelectorAll("tr > *");for(var h=0;h<t.length;h++)e=t[h].currentStyle||document.defaultView.getComputedStyle(t[h],""),o.push(this.getCreateCellModel("tbody",t,e,h,d))}return o},e.prototype.setFixedStyle=function(){this.setTheadFixedStyle(),this.setTbodyFixedStyle()},e.prototype.getCreateCellModel=function(e,i,o,d,h){return t.Cell.fromData({parent:e,tagName:i[d].tagName,x:d,y:h,outerWidth:i[d].offsetWidth,outerHeight:i[d].offsetHeight,paddingTop:o["padding-top"],paddingRight:o["padding-right"],paddingBottom:o["padding-bottom"],paddingLeft:o["padding-left"],borderTopWidth:o["border-top-width"],borderRightWidth:o["border-right-width"],borderBottomWidth:o["border-bottom-width"],borderLeftWidth:o["border-left-width"]})},e.prototype.setTheadFixedStyle=function(){for(var t,e,i=this.thead.querySelectorAll("tr"),o=0;o<i.length;o++){t=i[o].querySelectorAll("tr > *");for(var d=0;d<t.length;d++)0==o&&(e=this.theadModel.getCell(d,o),t[d].style.width=e.getCSSWidth())}},e.prototype.setTbodyFixedStyle=function(){for(var t,e=this.tbody.querySelectorAll("tr"),i=this.theadModel.getFirstCell(),o=0;o<e.length;o++){t=e[o].querySelectorAll("tr > *");for(var d=0;d<t.length;d++)if(0==d){var h=this.tbodyModel.getCell(1,o);t[d].style.width=i.getCSSWidth(),t[d].style.height=h.getCSSHeight(),t[d].style.position=this.tbodyModel.fixedPositon,t[d].style.left=this.tbodyModel.fixedLeft}else{var r=this.theadModel.getCell(d,0);t[d].style.width=r.getCSSWidth()}}},e.prototype.setEventHandler=function(){this.setScrollEvent(),this.setWindowResizeEvent()},e.prototype.setScrollEvent=function(){var t=this;this.tableView.addEventListener("scroll",function(){t.boxScroll()},!1)},e.prototype.setWindowResizeEvent=function(){var t=this;window.addEventListener("resize",function(){t.windowResize()},!1)},e.prototype.setTbodyScrollStyle=function(t){for(var e,i=this.tbody.querySelectorAll("tr"),o=0;o<i.length;o++){e=i[o].querySelectorAll("tr > *");for(var d=0;d<e.length;d++)0==d&&(e[d].style.left=t+"px")}},e.prototype.setTheadScrollStyle=function(t){this.thead.style.top=t+"px"},e.prototype.boxScroll=function(){this.setTbodyScrollStyle(this.tableView.scrollLeft),this.setTheadScrollStyle(this.tableView.scrollTop)},e.prototype.windowResize=function(){this.tableViewModel.isFullMode&&this.setTableViewFullModeStyle()},e.prototype.resizeContainer=function(){this.setTableViewModel(),this.setTableViewStyle()},e}();t.FixedTableView=e}(FixedTables||(FixedTables={}));