"use strict";var e=eval,global=e("this"),FixedTables;!function(t){var e=function(){function e(i){return e._instance?(void 0!==i&&(e._instance.model=new t.FixedTableModel(i),e._instance.view=new t.FixedTableView(e._instance.model)),e._instance):(this.model=new t.FixedTableModel(i),this.view=new t.FixedTableView(this.model),e._instance=this,void 0)}return e.prototype.chengeMode=function(t){this.model.chengeMode(t),this.view.resizeContainer()},e._instance=null,e}();t.FixedTable=e}(FixedTables||(FixedTables={})),"undefined"!=typeof module&&("undefined"==typeof module.exports.FixedTable&&(module.exports.FixedTable={}),module.exports.FixedTable=FixedTables.FixedTable),"undefined"!=typeof global&&("undefined"==typeof global.FixedTable&&(global.FixedTable={}),global.FixedTable=FixedTables.FixedTable);var FixedTables;!function(t){var e=0,i=/.*px/,o=function(){function t(t,e,i,o,d,h,r,s,l,n,a,p,b,u,f,g,y,c,T){this.id=t,this.isFixed=e,this.parent=i,this.tagName=o,this.x=d,this.y=h,this.width=r,this.height=s,this.outerWidth=l,this.outerHeight=n,this.paddingTop=a,this.paddingRight=p,this.paddingBottom=b,this.paddingLeft=u,this.borderTopWidth=f,this.borderRightWidth=g,this.borderBottomWidth=y,this.borderLeftWidth=c,this.tHeadCell=T,this.id=this.createId(),this.width=this.getWidth(),this.height=this.getHeight()}return t.fromData=function(e){return new t(e.id?e.id:0,e.isFixed?e.isFixed:Boolean("tbody"===e.parent&&0===e.x),e.parent?e.parent:"",e.tagName?e.tagName:"",e.x?e.x:0,e.y?e.y:0,e.width?e.width:0,e.height?e.height:0,e.outerWidth?e.outerWidth:0,e.outerHeight?e.outerHeight:0,e.paddingTop?e.paddingTop:"",e.paddingRight?e.paddingRight:"",e.paddingBottom?e.paddingBottom:"",e.paddingLeft?e.paddingLeft:"",e.borderTopWidth&&i.test(e.borderTopWidth)?e.borderTopWidth:"0px",e.borderRightWidth&&i.test(e.borderRightWidth)?e.borderRightWidth:"0px",e.borderBottomWidth&&i.test(e.borderBottomWidth)?e.borderBottomWidth:"0px",e.borderLeftWidth&&i.test(e.borderLeftWidth)?e.borderLeftWidth:"0px",e.tHeadCell?e.tHeadCell:null)},t.prototype.createId=function(){return++e},t.prototype.getWidth=function(){return"thead"===this.parent?this.outerWidth-(parseInt(this.paddingRight,10)+parseInt(this.paddingLeft,10)+parseInt(this.borderRightWidth,10)+parseInt(this.borderLeftWidth,10)):this.tHeadCell.outerWidth-(parseInt(this.paddingRight,10)+parseInt(this.paddingLeft,10)+parseInt(this.borderRightWidth,10)+parseInt(this.borderLeftWidth,10))},t.prototype.getCSSWidth=function(){return this.width+"px"},t.prototype.getHeight=function(t){return this.isFixed&&t?t.outerHeight-(parseInt(this.paddingTop,10)+parseInt(this.paddingBottom,10)+parseInt(this.borderTopWidth,10)+parseInt(this.borderBottomWidth,10)):this.outerHeight-(parseInt(this.paddingTop,10)+parseInt(this.paddingBottom,10)+parseInt(this.borderTopWidth,10)+parseInt(this.borderBottomWidth,10))},t.prototype.getCSSHeight=function(t){return t?(this.height=this.getHeight(t),this.height+"px"):this.height+"px"},t}();t.Cell=o}(FixedTables||(FixedTables={}));var FixedTables;!function(t){var e=/.*px/,i=function(){function i(t,e,i,o,d,h,r,s,l,n,a,p,b,u){this.thead=t,this.tbody=e,this.width=i,this.outerWidth=o,this.paddingTop=d,this.paddingRight=h,this.paddingBottom=r,this.paddingLeft=s,this.borderTopWidth=l,this.borderRightWidth=n,this.borderBottomWidth=a,this.borderLeftWidth=p,this.borderCollapse=b,this.borderSpacing=u}return i.fromData=function(o){return new i(t.Thead.fromData({}),t.Tbody.fromData({}),o.width?o.width:0,o.outerWidth?o.outerWidth:0,o.paddingTop?o.paddingTop:"",o.paddingRight?o.paddingRight:"",o.paddingBottom?o.paddingBottom:"",o.paddingLeft?o.paddingLeft:"",o.borderTopWidth&&e.test(o.borderTopWidth)?o.borderTopWidth:"0",o.borderRightWidth&&e.test(o.borderRightWidth)?o.borderRightWidth:"0",o.borderBottomWidth&&e.test(o.borderBottomWidth)?o.borderBottomWidth:"0",o.borderLeftWidth&&e.test(o.borderLeftWidth)?o.borderLeftWidth:"0",o.borderCollapse?o.borderCollapse:this.CSS_BORDER_COLLAPSE_VALUE,o.borderSpacing?o.borderSpacing:this.CSS_BORDER_SPACING_VALUE)},i.prototype.setStyles=function(t){this.width=parseInt(t.width,10),this.paddingTop=t["padding-top"],this.paddingRight=t["padding-right"],this.paddingBottom=t["padding-bottom"],this.paddingLeft=t["padding-left"],this.borderTopWidth=t["border-top-width"]&&e.test(t["border-top-width"])?t["border-top-width"]:"0",this.borderRightWidth=t["border-right-width"]&&e.test(t["border-right-width"])?t["border-right-width"]:"0",this.borderBottomWidth=t["border-bottom-width"]&&e.test(t["border-bottom-width"])?t["border-bottom-width"]:"0",this.borderLeftWidth=t["border-left-width"]&&e.test(t["border-left-width"])?t["border-left-width"]:"0",this.outerWidth=this.getOuterWidth(),this.setTheadFixedModel()},i.prototype.setTheadFixedModel=function(){this.thead.setStyles(this)},i.prototype.setTbodyFixedModel=function(){this.tbody.setStyles(this)},i.prototype.getOuterWidth=function(){return this.width+(parseInt(this.paddingLeft,10)+parseInt(this.paddingRight,10)+parseInt(this.borderLeftWidth,10)+parseInt(this.borderRightWidth,10))},i.CSS_BORDER_COLLAPSE_VALUE="collapse",i.CSS_BORDER_SPACING_VALUE="0",i}();t.Table=i}(FixedTables||(FixedTables={}));var FixedTables;!function(t){var e=function(){function e(t,e,i,o,d,h,r,s,l){this.elementIdName=t,this.table=e,this.isFullMode=i,this.fixedLineNum=o,this.fixedColumnNum=d,this.offsetTop=h,this.offsetLeft=r,this.position=s,this.overflow=l}return e.fromData=function(i){return new e(i.id?i.id:"fixedTable",t.Table.fromData({}),!!i.fullMode&&i.fullMode,i.fixedLineNum?i.fixedLineNum:1,i.fixedColumnNum?i.fixedColumnNum:1,0,0,this.CSS_POSITION_VALUE,this.CSS_OVERFLOW_VALUE)},e.prototype.getIdName=function(){return this.elementIdName},e.prototype.setOffset=function(t){this.offsetTop=t.top,this.offsetLeft=t.left},e.prototype.getFullModeSize=function(t,e){return{width:t-this.offsetLeft,height:e-this.offsetTop}},e.prototype.chengeMode=function(t){this.isFullMode=t},e.CSS_POSITION_VALUE="relative",e.CSS_OVERFLOW_VALUE="auto",e}();t.TableView=e}(FixedTables||(FixedTables={}));var FixedTables;!function(t){var e=/.*px/,i=function(){function t(t,e,i,o,d,h,r,s,l,n,a,p){this.cells=t,this.width=e,this.outerWidth=i,this.borderTopWidth=o,this.borderRightWidth=d,this.borderBottomWidth=h,this.borderLeftWidth=r,this.paddingLeft=s,this.marginTop=l,this.display=n,this.fixedPositon=a,this.fixedLeft=p}return t.fromData=function(i){return new t([],i.width?i.width:0,i.outerWidth?i.outerWidth:0,i.borderTopWidth&&e.test(i.borderTopWidth)?i.borderTopWidth:"0",i.borderRightWidth&&e.test(i.borderRightWidth)?i.borderRightWidth:"0",i.borderBottomWidth&&e.test(i.borderBottomWidth)?i.borderBottomWidth:"0",i.borderLeftWidth&&e.test(i.borderLeftWidth)?i.borderLeftWidth:"0",0,0,this.CSS_DISPLAY_VALUE,this.FIXED_CSS_POSITION_VALUE,this.FIXED_CSS_LEFT_VALUE)},t.prototype.setCells=function(t){this.cells=t},t.prototype.getCells=function(t,e){return this.cells.filter(function(i){return i.x===t&&i.y===e})},t.prototype.getCell=function(t,e){return this.getCells(t,e)[0]},t.prototype.setStyles=function(t){this.paddingLeft=t.thead.cells[0].outerWidth,this.marginTop=t.thead.outerHeight,this.width=t.outerWidth},t.prototype.getPaddingLeft=function(){return this.paddingLeft},t.prototype.getCSSPaddingLeft=function(){return this.paddingLeft+"px"},t.prototype.getCSSMarginTop=function(){return this.marginTop+"px"},t.prototype.getTbodyWidth=function(){return this.width},t.prototype.getCSSWidth=function(){return this.width+"px"},t.CSS_DISPLAY_VALUE="block",t.FIXED_CSS_POSITION_VALUE="absolute",t.FIXED_CSS_LEFT_VALUE="0",t}();t.Tbody=i}(FixedTables||(FixedTables={}));var FixedTables;!function(t){var e=/.*px/,i=function(){function t(t,e,i,o,d,h,r,s,l,n,a,p){this.lineNum=t,this.cells=e,this.width=i,this.outerWidth=o,this.outerHeight=d,this.borderTopWidth=h,this.borderRightWidth=r,this.borderBottomWidth=s,this.borderLeftWidth=l,this.position=n,this.top=a,this.zIndex=p}return t.fromData=function(i){return new t(0,[],i.width?i.width:0,i.outerWidth?i.outerWidth:0,i.outerHeight?i.outerHeight:0,i.borderTopWidth&&e.test(i.borderTopWidth)?i.borderTopWidth:"0",i.borderRightWidth&&e.test(i.borderRightWidth)?i.borderRightWidth:"0",i.borderBottomWidth&&e.test(i.borderBottomWidth)?i.borderBottomWidth:"0",i.borderLeftWidth&&e.test(i.borderLeftWidth)?i.borderLeftWidth:"0",this.CSS_POSITION_VALUE,this.CSS_TOP_VALUE,this.CSS_ZINDEX_VALUE)},t.prototype.setLineNumber=function(t){this.lineNum=t},t.prototype.setCells=function(t){this.cells=t},t.prototype.getCells=function(t,e){return this.cells.filter(function(i){return i.x===t&&i.y===e})},t.prototype.getCell=function(t,e){return this.getCells(t,e)[0]},t.prototype.setStyles=function(t){this.borderLeftWidth?this.width=t.outerWidth-(parseInt(this.borderLeftWidth,10)+parseInt(this.borderRightWidth,10)):this.width=t.outerWidth},t.prototype.setSelfStyles=function(t){this.borderBottomWidth=t.borderBottomWidth,this.borderLeftWidth=t.borderLeftWidth,this.borderRightWidth=t.borderRightWidth,this.borderTopWidth=t.borderTopWidth,this.outerWidth=t.outerWidth,this.outerHeight=t.outerHeight},t.prototype.getWidth=function(){return this.width},t.prototype.getCSSWidth=function(){return this.width+"px"},t.CSS_POSITION_VALUE="absolute",t.CSS_TOP_VALUE="0",t.CSS_ZINDEX_VALUE="10",t}();t.Thead=i}(FixedTables||(FixedTables={}));var FixedTables;!function(t){var e=function(){function e(e){void 0!==e?this.tableView=t.TableView.fromData(e):this.tableView=t.TableView.fromData({})}return e.prototype.getTableViewModel=function(){return this.tableView},e.prototype.getTableModel=function(){return this.tableView.table},e.prototype.getTheadModel=function(){return this.tableView.table.thead},e.prototype.getTbodyModel=function(){return this.tableView.table.tbody},e.prototype.chengeMode=function(t){this.tableView.chengeMode(t)},e}();t.FixedTableModel=e}(FixedTables||(FixedTables={}));var FixedTables;!function(t){var e=function(){function e(t){this.model=t,this.tableViewModel=this.model.getTableViewModel(),this.tableModel=this.model.getTableModel(),this.theadModel=this.model.getTheadModel(),this.tbodyModel=this.model.getTbodyModel(),this.setElements(),this.tableView&&this.init()}return e.prototype.init=function(){this.setTableViewModel(),this.setTableViewStyle(),this.setTableStyle(),this.setTableModel(),this.setTheadModel(),this.setTbodyModel(),this.setTheadFixedStyle(),this.setTheadStyle(),this.setTbodyStyle(),this.setTbodyFixedStyle(),this.setEventHandler()},e.prototype.setElements=function(){this.tableView=document.getElementById(this.tableViewModel.getIdName()),this.tableView&&(this.table=this.tableView.querySelector("table"),this.thead=this.table.querySelector("thead"),this.tbody=this.table.querySelector("tbody"))},e.prototype.setTableViewModel=function(){this.tableViewModel.setOffset(this.tableView.getBoundingClientRect())},e.prototype.setTableViewStyle=function(){this.tableView.style.position=this.tableViewModel.position,this.tableView.style.overflow=this.tableViewModel.overflow,this.tableViewModel.isFullMode&&this.setTableViewFullModeStyle()},e.prototype.setTableViewFullModeStyle=function(){for(var t=0;t<2;t++){var e=this.tableViewModel.getFullModeSize(document.body.clientWidth,document.body.clientHeight);this.tableView.style.width=e.width+"px",this.tableView.style.height=e.height+"px"}},e.prototype.setTableStyle=function(){this.table.style.borderCollapse=this.tableModel.borderCollapse,this.table.style.borderSpacing=this.tableModel.borderSpacing},e.prototype.setTableModel=function(){var t=this.table.currentStyle||document.defaultView.getComputedStyle(this.table,"");this.tableModel.setStyles(t)},e.prototype.setTheadStyle=function(){this.thead.style.position=this.theadModel.position,this.thead.style.top=this.theadModel.top,this.thead.style.width=this.theadModel.getCSSWidth(),this.thead.style.zIndex=this.theadModel.zIndex,this.theadModel.setSelfStyles(this.getCreateTheadModel(this.thead,this.thead.currentStyle||document.defaultView.getComputedStyle(this.thead,"")))},e.prototype.setTheadModel=function(){this.theadModel.setLineNumber(this.table.querySelectorAll("thead tr").length),this.theadModel.setCells(this.createTheadCellsModel())},e.prototype.createTheadCellsModel=function(){for(var t,e=(this.thead.querySelectorAll("tr"),this.thead.querySelectorAll("tr > *")),i=[],o=0;o<e.length;o++)t=e[o].currentStyle||document.defaultView.getComputedStyle(e[o],""),i.push(this.getCreateCellModel("thead",e,t,o,0));return i},e.prototype.getCreateTheadModel=function(e,i){return t.Thead.fromData({outerWidth:e.offsetWidth,outerHeight:e.offsetHeight,paddingTop:i["padding-top"],paddingRight:i["padding-right"],paddingBottom:i["padding-bottom"],paddingLeft:i["padding-left"],borderTopWidth:i["border-top-width"],borderRightWidth:i["border-right-width"],borderBottomWidth:i["border-bottom-width"],borderLeftWidth:i["border-left-width"]})},e.prototype.setTbodyStyle=function(){this.tableModel.setTbodyFixedModel(),this.tbody.style.display=this.tbodyModel.display,this.tbody.style.width=this.tbodyModel.width+"px",this.tbody.style.marginTop=this.tbodyModel.getCSSMarginTop()},e.prototype.setTbodyModel=function(){this.tbodyModel.setCells(this.createTbodyCellsModel())},e.prototype.createTbodyCellsModel=function(){for(var t,e,i=this.tbody.querySelectorAll("tr"),o=[],d=0;d<i.length;d++){t=this.filterElementTdTh(i[d].querySelectorAll("tr > *"));for(var h=0;h<t.length;h++)e=t[h].currentStyle||document.defaultView.getComputedStyle(t[h],""),o.push(this.getCreateCellModel("tbody",t,e,h,d))}return o},e.prototype.getCreateCellModel=function(e,i,o,d,h){return t.Cell.fromData({parent:e,tagName:i[d].tagName,x:d,y:h,outerWidth:i[d].offsetWidth,outerHeight:i[d].offsetHeight,paddingTop:o["padding-top"],paddingRight:o["padding-right"],paddingBottom:o["padding-bottom"],paddingLeft:o["padding-left"],borderTopWidth:o["border-top-width"],borderRightWidth:o["border-right-width"],borderBottomWidth:o["border-bottom-width"],borderLeftWidth:o["border-left-width"],tHeadCell:"tbody"===e?this.theadModel.getCell(d,0):null})},e.prototype.setTheadFixedStyle=function(){for(var t,e,i=this.thead.querySelectorAll("tr"),o=0;o<i.length;o++){t=i[o].querySelectorAll("tr > *");for(var d=0;d<t.length;d++)0==o&&(e=this.theadModel.getCell(d,o),t[d].style.width=e.getCSSWidth())}},e.prototype.setTbodyFixedStyle=function(){for(var t,e=this.tbody.querySelectorAll("tr"),i=0;i<e.length;i++){t=this.filterElementTdTh(e[i].querySelectorAll("tr > *")),e[i].style.display=this.tbodyModel.display,e[i].style.paddingLeft=this.tbodyModel.getCSSPaddingLeft();for(var o=0;o<t.length;o++){var d=this.tbodyModel.getCell(o,i);if(0==o){var h=this.tbodyModel.getCell(1,i);t[o].style.width=d.getCSSWidth(),t[o].style.height=d.getCSSHeight(h),t[o].style.position=this.tbodyModel.fixedPositon,t[o].style.left=this.tbodyModel.fixedLeft}else t[o].style.width=d.getCSSWidth()}}},e.prototype.filterElementTdTh=function(t){for(var e=[],i=0;i<t.length;i++)"TH"!==t[i].tagName&&"TD"!==t[i].tagName||e.push(t[i]);return e},e.prototype.setEventHandler=function(){this.setScrollEvent(),this.setWindowResizeEvent()},e.prototype.setScrollEvent=function(){var t=this;this.tableView.addEventListener("scroll",function(){t.boxScroll()},!1)},e.prototype.setWindowResizeEvent=function(){var t=this;window.addEventListener("resize",function(){t.windowResize()},!1)},e.prototype.setTbodyScrollStyle=function(t){for(var e,i=this.tbody.querySelectorAll("tr"),o=0;o<i.length;o++){e=i[o].querySelectorAll("tr > *");for(var d=0;d<e.length;d++)0==d&&(e[d].style.left=t+"px")}},e.prototype.setTheadScrollStyle=function(t){this.thead.style.top=t+"px"},e.prototype.boxScroll=function(){this.setTbodyScrollStyle(this.tableView.scrollLeft),this.setTheadScrollStyle(this.tableView.scrollTop)},e.prototype.windowResize=function(){this.tableViewModel.isFullMode&&this.setTableViewFullModeStyle()},e.prototype.resizeContainer=function(){this.setTableViewModel(),this.setTableViewStyle()},e}();t.FixedTableView=e}(FixedTables||(FixedTables={}));